!function(a){var s,r,i,d,o,e,t,n,l,c,p="mmenu";function u(e,t,n){if("object"!=typeof e&&(e={}),n)"boolean"!=typeof e.isMenu&&(n=n.children(),e.isMenu=1==n.length&&n.is(t.panelNodetype));else if("object"!=typeof e.onClick&&(e.onClick={}),void 0!==e.onClick.setLocationHref&&(a[p].deprecated("onClick.setLocationHref option","!onClick.preventDefault"),"boolean"==typeof e.onClick.setLocationHref)&&(e.onClick.preventDefault=!e.onClick.setLocationHref),e=a.extend(!0,{},a[p].defaults,e),a[p].useOverflowScrollingFallback()){switch(e.position){case"top":case"right":case"bottom":a[p].debug('position: "'+e.position+'" not supported when using the overflowScrolling-fallback.'),e.position="left"}switch(e.zposition){case"front":case"next":a[p].debug('z-position: "'+e.zposition+'" not supported when using the overflowScrolling-fallback.'),e.zposition="back"}}return e}function h(e,t,n){var o=a[p].support.transition;"webkitTransition"==o?e.one("webkitTransitionEnd",t):o?e.one(i.transitionend,t):setTimeout(t,n)}a[p]||(s={$wndw:null,$html:null,$body:null,$page:null,$blck:null,$allMenus:null,$scrollTopNode:null},r={},i={},d={},o=0,a[p]=function(e,t,n){return s.$allMenus=s.$allMenus.add(e),this.$menu=e,this.opts=t,this.conf=n,this.serialnr=o++,this._init(),this},a[p].prototype={open:function(){return this._openSetup(),this._openFinish(),"open"},_openSetup:function(){var e=function(){s.$scrollTopNode||(0!=s.$html.scrollTop()?s.$scrollTopNode=s.$html:0!=s.$body.scrollTop()&&(s.$scrollTopNode=s.$body));return s.$scrollTopNode?s.$scrollTopNode.scrollTop():0}(),n=(this.$menu.addClass(r.current),s.$allMenus.not(this.$menu).trigger(i.close),s.$page.data(d.style,s.$page.attr("style")||"").data(d.scrollTop,e).data(d.offetLeft,s.$page.offset().left),0);s.$wndw.off(i.resize).on(i.resize,function(e,t){(t||s.$html.hasClass(r.opened))&&(t=s.$wndw.width())!=n&&(n=t,s.$page.width(t-s.$page.data(d.offetLeft)))}).trigger(i.resize,[!0]),this.conf.preventTabbing&&s.$wndw.off(i.keydown).on(i.keydown,function(e){if(9==e.keyCode)return e.preventDefault(),!1}),this.opts.modal&&s.$html.addClass(r.modal),this.opts.moveBackground&&s.$html.addClass(r.background),"left"!=this.opts.position&&s.$html.addClass(r.mm(this.opts.position)),"back"!=this.opts.zposition&&s.$html.addClass(r.mm(this.opts.zposition)),this.opts.classes&&s.$html.addClass(this.opts.classes),s.$html.addClass(r.opened),this.$menu.addClass(r.opened),s.$page.scrollTop(e),this.$menu.scrollTop(0)},_openFinish:function(){var e=this;h(s.$page,function(){e.$menu.trigger(i.opened)},this.conf.transitionDuration),s.$html.addClass(r.opening),this.$menu.trigger(i.opening),window.scrollTo(0,1)},close:function(){var e=this;return h(s.$page,function(){e.$menu.removeClass(r.current).removeClass(r.opened),s.$html.removeClass(r.opened).removeClass(r.modal).removeClass(r.background).removeClass(r.mm(e.opts.position)).removeClass(r.mm(e.opts.zposition)),e.opts.classes&&s.$html.removeClass(e.opts.classes),s.$wndw.off(i.resize).off(i.keydown),s.$page.attr("style",s.$page.data(d.style)),s.$scrollTopNode&&s.$scrollTopNode.scrollTop(s.$page.data(d.scrollTop)),e.$menu.trigger(i.closed)},this.conf.transitionDuration),s.$html.removeClass(r.opening),this.$menu.trigger(i.closing),"close"},_init:function(){if(this.opts=u(this.opts,this.conf,this.$menu),this.direction=this.opts.slidingSubmenus?"horizontal":"vertical",this._initPage(s.$page),this._initMenu(),this._initBlocker(),this._initPanles(),this._initLinks(),this._initOpenClose(),this._bindCustomEvents(),a[p].addons)for(var e=0;e<a[p].addons.length;e++)"function"==typeof this["_addon_"+a[p].addons[e]]&&this["_addon_"+a[p].addons[e]]()},_bindCustomEvents:function(){var s=this,e=(this.$menu.off(i.open+" "+i.close+" "+i.setPage+" "+i.update).on(i.open+" "+i.close+" "+i.setPage+" "+i.update,function(e){e.stopPropagation()}),this.$menu.on(i.open,function(e){return a(this).hasClass(r.current)?(e.stopImmediatePropagation(),!1):s.open()}).on(i.close,function(e){return a(this).hasClass(r.current)?s.close():(e.stopImmediatePropagation(),!1)}).on(i.setPage,function(e,t){s._initPage(t),s._initOpenClose()}),this.$menu.find(this.opts.isMenu&&"horizontal"!=this.direction?"ul, ol":"."+r.panel));e.off(i.toggle+" "+i.open+" "+i.close).on(i.toggle+" "+i.open+" "+i.close,function(e){e.stopPropagation()}),"horizontal"==this.direction?e.on(i.open,function(e){var t,n=a(this),o=s.$menu;return!n.hasClass(r.current)&&(t=(o=a("."+r.panel,o)).filter("."+r.current),o.removeClass(r.highest).removeClass(r.current).not(n).not(t).addClass(r.hidden),n.hasClass(r.opened)?t.addClass(r.highest).removeClass(r.opened).removeClass(r.subopened):(n.addClass(r.highest),t.addClass(r.subopened)),n.removeClass(r.hidden).removeClass(r.subopened).addClass(r.current).addClass(r.opened),"open")}):e.on(i.toggle,function(e){var t=a(this);return t.triggerHandler(t.parent().hasClass(r.opened)?i.close:i.open)}).on(i.open,function(e){return a(this).parent().addClass(r.opened),"open"}).on(i.close,function(e){return a(this).parent().removeClass(r.opened),"close"})},_initBlocker:function(){var t=this;s.$blck||(s.$blck=a('<div id="'+r.blocker+'" />').css("opacity",0).appendTo(s.$body)),s.$blck.off(i.touchstart).on(i.touchstart,function(e){e.preventDefault(),e.stopPropagation(),s.$blck.trigger(i.mousedown)}).on(i.mousedown,function(e){e.preventDefault(),s.$html.hasClass(r.modal)||t.$menu.trigger(i.close)})},_initPage:function(e){e||1<(e=a(this.conf.pageSelector,s.$body)).length&&(a[p].debug("Multiple nodes found for the page-node, all nodes are wrapped in one <"+this.conf.pageNodetype+">."),e=e.wrapAll("<"+this.conf.pageNodetype+" />").parent()),e.addClass(r.page),s.$page=e},_initMenu:function(){this.conf.clone&&(this.$menu=this.$menu.clone(!0),this.$menu.add(this.$menu.find("*")).filter("[id]").each(function(){a(this).attr("id",r.mm(a(this).attr("id")))})),this.$menu.contents().each(function(){3==a(this)[0].nodeType&&a(this).remove()}),this.$menu.prependTo("body").addClass(r.menu),this.$menu.addClass(r.mm(this.direction)),this.opts.classes&&this.$menu.addClass(this.opts.classes),this.opts.isMenu&&this.$menu.addClass(r.ismenu),"left"!=this.opts.position&&this.$menu.addClass(r.mm(this.opts.position)),"back"!=this.opts.zposition&&this.$menu.addClass(r.mm(this.opts.zposition))},_initPanles:function(){var l=this,n=(this.__refactorClass(a("."+this.conf.listClass,this.$menu),"list"),this.opts.isMenu&&a("ul, ol",this.$menu).not(".mm-nolist").addClass(r.list),a("."+r.list+" > li",this.$menu)),e=(this.__refactorClass(n.filter("."+this.conf.selectedClass),"selected"),this.__refactorClass(n.filter("."+this.conf.labelClass),"label"),this.__refactorClass(n.filter("."+this.conf.spacerClass),"spacer"),n.off(i.setSelected).on(i.setSelected,function(e,t){e.stopPropagation(),n.removeClass(r.selected),(t="boolean"!=typeof t?!0:t)&&a(this).addClass(r.selected)}),this.__refactorClass(a("."+this.conf.panelClass,this.$menu),"panel"),this.$menu.children().filter(this.conf.panelNodetype).add(this.$menu.find("."+r.list).children().children().filter(this.conf.panelNodetype)).addClass(r.panel),a("."+r.panel,this.$menu)),o=(e.each(function(e){var t=a(this),e=t.attr("id")||r.mm("m"+l.serialnr+"-p"+e);t.attr("id",e)}),e.find("."+r.panel).each(function(e){var t=a(this),n=t.is("ul, ol")?t:t.find("ul ,ol").first(),o=t.parent(),s=o.find("> a, > span"),i=o.closest("."+r.panel);t.data(d.parent,o),o.parent().is("."+r.list)&&(o=a('<a class="'+r.subopen+'" href="#'+t.attr("id")+'" />').insertBefore(s),s.is("a")||o.addClass(r.fullsubopen),"horizontal"==l.direction)&&n.prepend('<li class="'+r.subtitle+'"><a class="'+r.subclose+'" href="#'+i.attr("id")+'">'+s.text()+"</a></li>")}),"horizontal"==this.direction?i.open:i.toggle),t=(e.each(function(e){var t=a(this),n=t.attr("id");a('a[href="#'+n+'"]',l.$menu).off(i.click).on(i.click,function(e){e.preventDefault(),t.trigger(o)})}),"horizontal"==this.direction?(t=a("."+r.list+" > li."+r.selected,this.$menu)).add(t.parents("li")).parents("li").removeClass(r.selected).end().each(function(){var e=a(this),t=e.find("> ."+r.panel);t.length&&(e.parents("."+r.panel).addClass(r.subopened),t.addClass(r.opened))}).closest("."+r.panel).addClass(r.opened).parents("."+r.panel).addClass(r.subopened):a("li."+r.selected,this.$menu).addClass(r.opened).parents("."+r.selected).removeClass(r.selected),e.filter("."+r.opened));(t=t.length?t:e.first()).addClass(r.opened).last().addClass(r.current),"horizontal"==this.direction&&e.find("."+r.panel).appendTo(this.$menu)},_initLinks:function(){var o=this;a("."+r.list+" > li > a",this.$menu).not("."+r.subopen).not("."+r.subclose).not('[rel="external"]').not('[target="_blank"]').off(i.click).on(i.click,function(e){var t=a(this),n=t.attr("href"),n=(o.__valueOrFn(o.opts.onClick.setSelected,t)&&t.parent().trigger(i.setSelected),o.__valueOrFn(o.opts.onClick.preventDefault,t,"#"==n.slice(0,1)));n&&e.preventDefault(),o.__valueOrFn(o.opts.onClick.blockUI,t,!n)&&s.$html.addClass(r.blocking),o.__valueOrFn(o.opts.onClick.close,t,n)&&o.$menu.triggerHandler(i.close)})},_initOpenClose:function(){var t=this,e=this.$menu.attr("id");e&&e.length&&(this.conf.clone&&(e=r.umm(e)),a('a[href="#'+e+'"]').off(i.click).on(i.click,function(e){e.preventDefault(),t.$menu.trigger(i.open)})),(e=s.$page.attr("id"))&&e.length&&a('a[href="#'+e+'"]').off(i.click).on(i.click,function(e){e.preventDefault(),t.$menu.trigger(i.close)})},__valueOrFn:function(e,t,n){return"function"==typeof e?e.call(t[0]):void 0===e&&void 0!==n?n:e},__refactorClass:function(e,t){e.removeClass(this.conf[t+"Class"]).addClass(r[t])}},a.fn[p]=function(t,n){return s.$wndw||(s.$wndw=a(window),s.$html=a("html"),s.$body=a("body"),s.$allMenus=a(),a.each([r,d,i],function(e,n){n.add=function(e){for(var t in e=e.split(" "))n[e[t]]=n.mm(e[t])}}),r.mm=function(e){return"mm-"+e},r.add("menu ismenu panel list subtitle selected label spacer current highest hidden page blocker modal background opened opening subopened subopen fullsubopen subclose nooverflowscrolling"),r.umm=function(e){return e="mm-"==e.slice(0,3)?e.slice(3):e},d.mm=function(e){return"mm-"+e},d.add("parent style scrollTop offetLeft"),i.mm=function(e){return e+".mm"},i.add("toggle open opening opened close closing closed update setPage setSelected transitionend touchstart touchend mousedown mouseup click keydown keyup resize"),a[p]._c=r,a[p]._d=d,a[p]._e=i,a[p].glbl=s,a[p].useOverflowScrollingFallback(c)),t=u(t,n),n=function(e){"object"!=typeof e&&(e={});void 0!==e.panelNodeType&&(a[p].deprecated("panelNodeType configuration option","panelNodetype"),e.panelNodetype=e.panelNodeType);"string"!=typeof(e=a.extend(!0,{},a[p].configuration,e)).pageSelector&&(e.pageSelector="> "+e.pageNodetype);return e}(n),this.each(function(){var e=a(this);e.data(p)||e.data(p,new a[p](e,t,n))})},a[p].version="4.1.7",a[p].defaults={position:"left",zposition:"back",moveBackground:!0,slidingSubmenus:!0,modal:!1,classes:"",onClick:{setSelected:!0}},a[p].configuration={preventTabbing:!0,panelClass:"Panel",listClass:"List",selectedClass:"Selected",labelClass:"Label",spacerClass:"Spacer",pageNodetype:"div",panelNodetype:"ul, ol, div",transitionDuration:400},e=window.document,t=window.navigator.userAgent,n=document.createElement("div").style,l="ontouchstart"in e,e="WebkitOverflowScrolling"in e.documentElement.style,n="webkitTransition"in n?"webkitTransition":"transition"in n,t=0<=t.indexOf("Android")&&parseFloat(t.slice(t.indexOf("Android")+8))<2.4,a[p].support={touch:l,transition:n,oldAndroidBrowser:t,overflowscrolling:!l||e||!t},a[p].useOverflowScrollingFallback=function(e){return s.$html?("boolean"==typeof e&&s.$html[e?"addClass":"removeClass"](r.nooverflowscrolling),s.$html.hasClass(r.nooverflowscrolling)):c=e},a[p].debug=function(e){},a[p].deprecated=function(e,t){"undefined"!=typeof console&&void 0!==console.warn&&console.warn("MMENU: "+e+" is deprecated, use "+t+" instead.")},c=!a[p].support.overflowscrolling)}(jQuery);